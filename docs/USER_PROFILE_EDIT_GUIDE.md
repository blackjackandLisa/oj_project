# 用户信息修改功能使用指南

## 📋 功能概述

用户信息修改功能允许用户更新个人资料、联系方式、偏好设置等，提供完整的个人信息管理体验。

## 🎯 功能特性

### ✅ 已实现功能

#### 1. 基本信息修改
- **用户名修改**：支持修改用户名，自动检查唯一性
- **邮箱修改**：支持修改邮箱，验证格式和唯一性
- **个人简介**：支持添加/修改个人简介（最多500字符）
- **学校/专业**：支持添加学校和专业信息

#### 2. 联系方式管理
- **手机号**：支持添加手机号
- **微信号**：支持添加微信号
- **GitHub**：支持添加GitHub链接，自动补全https://
- **个人博客**：支持添加个人博客链接

#### 3. 密码安全
- **密码修改**：支持修改密码，需要验证原密码
- **密码强度**：新密码至少6位
- **密码确认**：需要确认新密码

#### 4. 偏好设置
- **编程语言偏好**：C++、Python、两者都喜欢
- **主题偏好**：浅色主题、深色主题、跟随系统

#### 5. 头像管理
- **头像上传**：支持JPG、PNG、GIF格式
- **文件大小限制**：最大2MB
- **实时预览**：上传后立即显示预览
- **默认头像**：未设置头像时显示默认SVG头像

## 🚀 使用方法

### 访问修改页面

**方法1：通过导航栏**
1. 登录后点击右上角用户名下拉菜单
2. 选择"修改信息"

**方法2：通过个人中心**
1. 访问个人中心：http://localhost:8000/users/profile/
2. 点击"修改信息"按钮

**方法3：直接访问**
- 直接访问：http://localhost:8000/users/profile/edit/

### 修改信息步骤

#### 1. 修改基本信息
```
1. 在"基本信息"区域修改用户名、邮箱
2. 填写个人简介、学校、专业
3. 点击"保存修改"按钮
```

#### 2. 修改联系方式
```
1. 在"联系方式"区域填写手机号、微信号
2. 添加GitHub和个人博客链接
3. 系统会自动为链接添加https://前缀
```

#### 3. 修改密码
```
1. 在"密码修改"区域输入原密码
2. 输入新密码（至少6位）
3. 确认新密码
4. 点击"保存修改"按钮
```

#### 4. 上传头像
```
1. 点击"更换头像"按钮
2. 选择图片文件（JPG/PNG/GIF，最大2MB）
3. 系统自动上传并显示预览
```

#### 5. 设置偏好
```
1. 选择编程语言偏好
2. 选择主题偏好
3. 点击"保存修改"按钮
```

## 🔧 技术实现

### 后端API

#### 1. 信息修改API
- **URL**: `/users/api/profile/update/`
- **方法**: POST
- **功能**: 更新用户基本信息和偏好设置

#### 2. 头像上传API
- **URL**: `/users/api/profile/avatar/`
- **方法**: POST
- **功能**: 上传用户头像

### 前端特性

#### 1. 实时验证
- 用户名唯一性检查
- 邮箱格式验证
- 密码强度检查
- 文件类型和大小验证

#### 2. 用户体验
- AJAX异步提交
- 实时错误提示
- 加载状态显示
- 成功提示信息

#### 3. 响应式设计
- 支持移动端访问
- 自适应布局
- 友好的表单设计

## 📱 界面展示

### 修改信息页面布局

```
┌─────────────────────────────────────┐
│           修改个人信息              │
├─────────────────────────────────────┤
│  📷 头像设置                        │
│  [头像预览] [更换头像]              │
├─────────────────────────────────────┤
│  👤 基本信息                        │
│  用户名: [输入框]                   │
│  邮箱:   [输入框]                   │
│  个人简介: [文本域]                 │
│  学校:   [输入框]                   │
│  专业:   [输入框]                   │
├─────────────────────────────────────┤
│  📞 联系方式                        │
│  手机号: [输入框]                   │
│  微信号: [输入框]                   │
│  GitHub: [输入框]                   │
│  个人博客: [输入框]                 │
├─────────────────────────────────────┤
│  🔒 密码修改                        │
│  原密码: [密码框]                   │
│  新密码: [密码框]                   │
│  确认密码: [密码框]                 │
├─────────────────────────────────────┤
│  ⚙️ 偏好设置                        │
│  编程语言偏好: [下拉选择]           │
│  主题偏好: [下拉选择]               │
├─────────────────────────────────────┤
│        [保存修改] [取消]            │
└─────────────────────────────────────┘
```

## 🛡️ 安全特性

### 1. 数据验证
- 服务器端验证所有输入
- 防止SQL注入和XSS攻击
- 文件类型和大小限制

### 2. 权限控制
- 登录用户才能修改信息
- 只能修改自己的信息
- CSRF保护

### 3. 密码安全
- 原密码验证
- 密码加密存储
- 密码强度要求

## 📊 数据库结构

### UserProfile模型扩展字段

```python
# 联系方式
phone = models.CharField('手机号', max_length=20, blank=True)
wechat = models.CharField('微信号', max_length=50, blank=True)

# 偏好设置
language_preference = models.CharField(
    '编程语言偏好', 
    max_length=20, 
    choices=[('C++', 'C++'), ('Python', 'Python'), ('Both', '两者都喜欢')],
    default='Both'
)
theme_preference = models.CharField(
    '主题偏好',
    max_length=20,
    choices=[('light', '浅色主题'), ('dark', '深色主题'), ('auto', '跟随系统')],
    default='auto'
)
```

## 🎨 样式特性

### 1. 现代化设计
- 卡片式布局
- 渐变色彩
- 圆角设计
- 阴影效果

### 2. 交互反馈
- 悬停效果
- 点击反馈
- 加载动画
- 状态提示

### 3. 响应式布局
- 移动端适配
- 弹性网格
- 自适应字体

## 🔍 错误处理

### 常见错误及解决方案

#### 1. 用户名已存在
```
错误: "用户名已存在"
解决: 选择其他用户名
```

#### 2. 邮箱格式错误
```
错误: "邮箱格式不正确"
解决: 检查邮箱格式，如：user@example.com
```

#### 3. 原密码错误
```
错误: "原密码错误"
解决: 输入正确的原密码
```

#### 4. 文件过大
```
错误: "头像文件大小不能超过2MB"
解决: 压缩图片或选择更小的文件
```

#### 5. 文件格式不支持
```
错误: "只支持 JPG、PNG、GIF 格式的图片"
解决: 转换图片格式
```

## 📈 性能优化

### 1. 前端优化
- 图片压缩上传
- 异步表单提交
- 本地验证减少请求

### 2. 后端优化
- 数据库索引
- 缓存机制
- 批量更新

## 🧪 测试建议

### 功能测试
1. **基本信息修改**
   - 修改用户名（测试唯一性）
   - 修改邮箱（测试格式验证）
   - 修改个人简介

2. **密码修改**
   - 输入错误原密码
   - 设置弱密码
   - 确认密码不一致

3. **头像上传**
   - 上传大文件
   - 上传非图片文件
   - 上传正常图片

4. **偏好设置**
   - 修改语言偏好
   - 修改主题偏好

### 兼容性测试
- Chrome浏览器
- Firefox浏览器
- Safari浏览器
- 移动端浏览器

## 🚀 未来扩展

### 计划功能
1. **更多联系方式**
   - QQ号
   - 微博链接
   - 个人网站

2. **高级设置**
   - 邮件通知设置
   - 隐私设置
   - 数据导出

3. **社交功能**
   - 关注其他用户
   - 私信功能
   - 动态发布

---

**最后更新**: 2025-10-02  
**版本**: 1.0.0  
**状态**: ✅ 已完成并测试

## 🎉 使用体验

现在用户可以：

1. ✅ **完整管理个人信息**：用户名、邮箱、简介等
2. ✅ **安全修改密码**：原密码验证 + 新密码确认
3. ✅ **个性化头像**：支持多种格式，实时预览
4. ✅ **联系方式管理**：手机、微信、GitHub、博客
5. ✅ **偏好设置**：编程语言和主题偏好
6. ✅ **友好界面**：现代化设计，响应式布局
7. ✅ **实时验证**：即时错误提示，良好用户体验

**访问地址**: http://localhost:8000/users/profile/edit/
